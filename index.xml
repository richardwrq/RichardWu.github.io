<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>RichardWu&#39;s Blog on RichardWu&#39;s Blog</title>
    <link>https://richardwrq.github.io/</link>
    <description>Recent content in RichardWu&#39;s Blog on RichardWu&#39;s Blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh</language>
    <lastBuildDate>Wed, 21 Nov 2018 15:13:22 +0800</lastBuildDate>
    <atom:link href="/" rel="self" type="application/rss+xml" />
    
    <item>
      <title>IntelliJ IDEA/Android Studioæ’ä»¶å¼€å‘å…¥é—¨æŒ‡å—</title>
      <link>https://richardwrq.github.io/2018/ideaplugin/</link>
      <pubDate>Wed, 21 Nov 2018 15:13:22 +0800</pubDate>
      
      <guid>https://richardwrq.github.io/2018/ideaplugin/</guid>
      <description>

&lt;p&gt;åŸºäºIntelliJå¹³å°çš„äº§å“éƒ½å¯ä»¥é€šè¿‡æ·»åŠ æ’ä»¶æ¥ä¸°å¯Œå…¶åŸæœ‰çš„åŠŸèƒ½ï¼ŒJetBrainså›¢é˜Ÿä¹Ÿæˆ‘ä»¬æä¾›äº†ä¸°å¯Œçš„APIæ¥è¿›è¡Œæ’ä»¶å¼€å‘ï¼Œæ‰€æœ‰çš„æ’ä»¶éƒ½å¯ä»¥åœ¨&lt;a href=&#34;https://plugins.jetbrains.com/&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;JetBrains Plugin Repository&lt;/a&gt;æ‰¾åˆ°ã€‚å¸¸è§çš„æ’ä»¶ç±»å‹æœ‰ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;è‡ªå®šä¹‰è¯­è¨€æ”¯æŒï¼ˆå¦‚Javaã€Kotlinï¼‰&lt;/li&gt;
&lt;li&gt;æ¡†æ¶é›†æˆ&lt;/li&gt;
&lt;li&gt;å·¥å…·é›†æˆ&lt;/li&gt;
&lt;li&gt;ç”¨æˆ·ç•Œé¢æ’ä»¶&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;è¿™äº›ç±»å‹æ’ä»¶çš„ä»‹ç»ä»¥åŠåŠŸèƒ½å°±ä¸ä¸€ä¸€ç»†è¯´äº†ï¼Œ&lt;a href=&#34;http://www.jetbrains.org/intellij/sdk/docs/basics/getting_started.html&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;å®˜ç½‘&lt;/a&gt;ä¹Ÿæœ‰æ¯”è¾ƒè¯¦ç»†çš„ä»‹ç»ã€‚
ç®€å•æ¥è¯´ï¼ŒIDEAä¹Ÿå¥½Android Studioä¹Ÿå¥½ï¼ˆä»¥ä¸‹ç»Ÿä¸€ç§°ä¸ºIDEï¼‰ï¼Œå®ƒä»¬ä¸ºæ’ä»¶æä¾›äº†è¿è¡Œç¯å¢ƒï¼Œé€šè¿‡å„ç§æ’ä»¶çš„é…åˆæ¥å®ç°ä¸åŒçš„åŠŸèƒ½ã€‚ä¸‹é¢å°±å…ˆä»‹ç»å¼€å‘IDEAæ’ä»¶å‰éœ€è¦å“ªäº›å‡†å¤‡ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.jetbrains.com/idea/?fromMenu&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;å®‰è£…IDEA&lt;/a&gt;ï¼Œå¦‚æœæƒ³åœ¨å¼€å‘æ’ä»¶çš„è¿‡ç¨‹ä¸­è¿›è¡ŒDebugï¼Œé‚£ä¹ˆè¿˜éœ€è¦æŠŠIDEAçš„æºç ä¸‹è½½ä¸‹æ¥(&lt;a href=&#34;https://github.com/JetBrains/intellij-community&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;Githubæºç åœ°å€&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;é…ç½®IntelliJ Platform SDKï¼Œä¹Ÿå°±æ˜¯å¼€å‘æ’ä»¶æ‰€éœ€çš„SDKï¼Œç±»ä¼¼å¼€å‘Androidåº”ç”¨æ—¶éœ€è¦Android SDKï¼Œå¹¶ä¸”æ’ä»¶éƒ½æ˜¯è¿è¡Œåœ¨JVMä¸Šçš„ï¼Œæ‰€ä»¥ä¹Ÿéœ€è¦é…ç½®JDKçš„è·¯å¾„&lt;/li&gt;
&lt;li&gt;æŒ‡å®š&lt;strong&gt;Sandbox Home&lt;/strong&gt;ç›®å½•ï¼Œ&lt;strong&gt;Sandbox Home&lt;/strong&gt;ç›®å½•ç”¨äºå­˜æ”¾æ’ä»¶é¡¹ç›®å®ä¾‹çš„ä¸€äº›é…ç½®æ–‡ä»¶ã€‚åœ¨macOSç³»ç»Ÿä¸­é»˜è®¤å­˜æ”¾è·¯å¾„æ˜¯&lt;code&gt;/Users/{ç”¨æˆ·å}/Library/Caches/IdeaIC2018.2/plugins-sandbox&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;é…ç½®SDKï¼Œå¦‚æœä½ æŠŠIDEAæºç ä¹Ÿä¸‹è½½äº†ï¼Œé‚£ä¹ˆè¿˜éœ€è¦é…ç½®ä¸€ä¸‹æºç çš„è·¯å¾„
&lt;img src=&#34;https://richardwrq.github.io/IDEAPlugin/æ·»åŠ SDK.jpg&#34; alt=&#34;æ·»åŠ SDK&#34; /&gt;
&lt;img src=&#34;https://richardwrq.github.io/IDEAPlugin/é€‰æ‹©æºç è·¯å¾„.jpg&#34; alt=&#34;æ·»åŠ æºç &#34; /&gt;&lt;/p&gt;

&lt;p&gt;ç¯å¢ƒæ­å»ºå¥½äº†ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘ä»¬å°±åˆ›å»ºä¸€ä¸ªç®€æ˜“çš„æ’ä»¶å·¥ç¨‹ï¼Œä¾æ¬¡ç‚¹å‡»&lt;code&gt;File-&amp;gt;New-&amp;gt;Project&lt;/code&gt;ç„¶ååœ¨å¼¹å‡ºæ¡†å·¦æ é€‰æ‹©&lt;code&gt;Gradle&lt;/code&gt;ï¼Œç„¶ååœ¨å³ä¾§ä¸€æ å‹¾é€‰&lt;code&gt;IntelliJ Platform Plugin&lt;/code&gt;ï¼ˆå¦‚æœæƒ³è¦ä½¿ç”¨Kotlinè¿›è¡Œå¼€å‘å°±æŠŠ&lt;code&gt;Kotlin&lt;/code&gt;é‚£ä¸€é¡¹ä¹Ÿå‹¾é€‰ä¸Šï¼‰
&lt;img src=&#34;https://richardwrq.github.io/IDEAPlugin/æ–°å»ºæ’ä»¶é¡¹ç›®.jpg&#34; alt=&#34;æ–°å»ºæ’ä»¶&#34; /&gt;
é¡¹ç›®åˆ›å»ºå¥½åé•¿è¿™æ ·ï¼š
&lt;img src=&#34;https://richardwrq.github.io/IDEAPlugin/é¡¹ç›®ç»“æ„.jpg&#34; alt=&#34;é¡¹ç›®ç»“æ„&#34; /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h1 id=&#34;åˆ›å»ºaction&#34;&gt;åˆ›å»ºAction&lt;/h1&gt;

&lt;p&gt;æ’ä»¶å¯ä»¥è‡ªå®šä¹‰IDEçš„UIï¼Œåœ¨èœå•æˆ–å·¥å…·æ ä¸­æ–°åŠ å…¥ä¸€ä¸ªItemã€‚SDKæä¾›äº†ä¸€ä¸ªç±»&lt;code&gt;AnAction&lt;/code&gt;ï¼Œè¿™ä¸ªç±»çš„&lt;code&gt;actionPerformed&lt;/code&gt;æ–¹æ³•åœ¨ä½ æ¯æ¬¡åœ¨èœå•æ ä¸­é€‰ä¸­æˆ–åœ¨å·¥å…·æ ä¸­ç‚¹å‡»å¯¹åº”é¡¹æ—¶éƒ½ä¼šè¢«è°ƒç”¨ã€‚åˆ›å»ºä¸€ä¸ª&lt;strong&gt;Action&lt;/strong&gt;åªéœ€è¦ä¸¤æ­¥ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;å®šä¹‰æ´¾ç”ŸäºAnActionçš„ç±»&lt;/li&gt;
&lt;li&gt;æ³¨å†ŒAction&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;code&gt;å½“ç„¶ä½ ä¹Ÿå¯ä»¥å®šä¹‰ä¸€ç»„æ´¾ç”ŸäºAnActionçš„ç±»&lt;/code&gt;&lt;/p&gt;

&lt;h1 id=&#34;å®šä¹‰action&#34;&gt;å®šä¹‰Action&lt;/h1&gt;

&lt;p&gt;ä¸‹é¢çš„ä»£ç æ˜¯æˆ‘ä»¿ç…§å®˜æ–¹ä¾‹å­å®šä¹‰çš„ä¸€ä¸ªActionï¼Œåªæ˜¯æŠŠJavaæ”¹æˆäº†Kotlinå®ç°&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-Kotlin&#34;&gt;class TextBoxes : AnAction(&amp;quot;Text _Boxes&amp;quot;) {

    override fun actionPerformed(e: AnActionEvent) {
        val project = e.getData(PlatformDataKeys.PROJECT)//è¿™ä¸ªProjectæ˜¯ä¸æ˜¯å¾ˆç†Ÿæ‚‰ï¼Ÿå®ƒå…¶å®è·ŸGradleä¸­çš„Projectæ„ä¹‰æ˜¯ä¸€æ ·çš„
        val txt = Messages.showInputDialog(project, &amp;quot;What is your name?&amp;quot;, &amp;quot;Input your name&amp;quot;, Messages.getQuestionIcon())
        Messages.showMessageDialog(project, &amp;quot;Hello, $txt!\\n I am glad to see you.&amp;quot;, &amp;quot;Information&amp;quot;, Messages.getInformationIcon())//è¿™ä¸¤æ®µä»£ç å…¶å®å¾ˆç®€å•ï¼Œéƒ½ä¸ç”¨è§£é‡Šäº†
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h1 id=&#34;æ³¨å†Œaction&#34;&gt;æ³¨å†ŒAction&lt;/h1&gt;

&lt;p&gt;å®šä¹‰å¥½&lt;strong&gt;Action&lt;/strong&gt;ä¹‹åå½“ç„¶å°±éœ€è¦å‘ŠçŸ¥IDEä½ æœ‰å“ªäº›&lt;strong&gt;Action&lt;/strong&gt;å•¦ï¼Œæ‰€ä»¥å°±éœ€è¦å¯¹è¿™äº›&lt;strong&gt;Action&lt;/strong&gt;è¿›è¡Œæ³¨å†Œï¼Œæ³¨å†Œçš„æ–¹å¼æœ‰ä¸¤ç§ï¼ˆæ˜¯ä¸æ˜¯ä¼¼æ›¾ç›¸è¯†çš„æ„Ÿè§‰ï¼Ÿï¼‰ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;åœ¨&lt;code&gt;plugin.xml&lt;/code&gt;æ–‡ä»¶çš„&lt;code&gt;&amp;lt;actions&amp;gt;&lt;/code&gt;æ ‡ç­¾ä¸­è¿›è¡Œæ³¨å†Œ&lt;/li&gt;
&lt;li&gt;åœ¨ä»£ç ä¸­è¿›è¡Œæ³¨å†Œ&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&#34;åœ¨plugin-xmlæ–‡ä»¶ä¸­è¿›è¡Œæ³¨å†Œ&#34;&gt;åœ¨plugin.xmlæ–‡ä»¶ä¸­è¿›è¡Œæ³¨å†Œ&lt;/h1&gt;

&lt;p&gt;è·ŸAndroidå¼€å‘ä¸­åœ¨&lt;code&gt;AndroidManifest.xml&lt;/code&gt;æ–‡ä»¶ä¸­æ³¨å†Œç»„ä»¶éå¸¸ç›¸åƒï¼Œæˆ‘ä»¬åªéœ€è¦æŒ‰ç…§&lt;strong&gt;IntelliJ&lt;/strong&gt;å¹³å°çš„è§„èŒƒåœ¨&lt;code&gt;plugin.xml&lt;/code&gt;æ–‡ä»¶çš„&lt;code&gt;&amp;lt;actions&amp;gt;&lt;/code&gt;éƒ¨åˆ†å†…å®¹è¿›è¡Œä¿®æ”¹ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;actions&amp;gt;
  &amp;lt;group id=&amp;quot;MyPlugin.SampleMenu&amp;quot; text=&amp;quot;_Sample Menu&amp;quot; description=&amp;quot;Sample menu&amp;quot;&amp;gt;
    &amp;lt;add-to-group group-id=&amp;quot;MainMenu&amp;quot; anchor=&amp;quot;last&amp;quot;  /&amp;gt;
       &amp;lt;!--æŠŠè¿™ç»„ActionåŠ åˆ°&amp;quot;MainMenu&amp;quot;ä¸­--&amp;gt;
       &amp;lt;action id=&amp;quot;Myplugin.Textboxes&amp;quot; class=&amp;quot;Mypackage.TextBoxes&amp;quot; text=&amp;quot;Text _Boxes&amp;quot; description=&amp;quot;A test menu item&amp;quot; /&amp;gt;
  &amp;lt;/group&amp;gt;
&amp;lt;/actions&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¸‹é¢å¯¹&lt;code&gt;plugin.xml&lt;/code&gt;çš„è§„èŒƒåšä¸€äº›ä»‹ç»ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;!-- Actions --&amp;gt;
    &amp;lt;actions&amp;gt;
    &amp;lt;!-- &amp;lt;action&amp;gt;å¯¹Actionè¿›è¡Œæ³¨å†Œï¼Œ
         &amp;quot;id&amp;quot;å®šä¹‰äº†è¿™ä¸ªActionçš„å”¯ä¸€è¯†åˆ«idï¼Œ
         &amp;quot;class&amp;quot;ç”¨äºæŒ‡å®šè¯¥Actionå¯¹åº”ç±»çš„å…¨è·¯å¾„ï¼Œ
         &amp;quot;text&amp;quot;å®šä¹‰è¿™ä¸ªActionåœ¨èœå•æ æˆ–è€…å·¥å…·æ ä¸­æ˜¾ç¤ºçš„æ–‡æœ¬ï¼Œå‰é¢åŠ _è¡¨ç¤ºåœ¨è¯¥å­—ç¬¦ä¸‹åŠ ä¸‹åˆ’çº¿ï¼Œ
         &amp;quot;use-shortcut-of&amp;quot; å¯é€‰é¡¹ æŒ‡å®šä½¿ç”¨å’ŒæŸä¸€ä¸ªActionä¸€æ ·çš„å¿«æ·é”®
         &amp;quot;description&amp;quot; å¯é€‰é¡¹ å¯¹Actionçš„æè¿°ï¼ˆå½“ä½ çš„é¼ æ ‡æŒ‡é’ˆåœç•™åœ¨è¯¥itemæ—¶å°±ä¼šæ˜¾ç¤ºè¯¥å†…å®¹ï¼‰
         &amp;quot;icon&amp;quot;æ²¡å•¥å¥½è¯´çš„--&amp;gt;
    &amp;lt;action id=&amp;quot;VssIntegration.GarbageCollection&amp;quot; class=&amp;quot;com.foo.impl.CollectGarbage&amp;quot; text=&amp;quot;Collect _Garbage&amp;quot; description=&amp;quot;Run garbage collector&amp;quot; icon=&amp;quot;icons/garbage.png&amp;quot;&amp;gt;
        &amp;lt;!-- &amp;lt;add-to-group&amp;gt;èŠ‚ç‚¹è¡¨ç¤ºæŒ‡å®šActionè¢«åŠ å…¥åˆ°å·²å­˜åœ¨çš„ä¸€ä¸ªç»„ä¸­ï¼Œ
             &amp;quot;group-id&amp;quot;è¡¨ç¤ºåŠ å…¥çš„ç»„çš„idï¼Œ
             &amp;quot;anchor&amp;quot;æŒ‡å®šActionç›¸å¯¹äºç»„ä¸­å…¶ä»–Actionçš„ä½ç½®ï¼Œå¯ä»¥æŒ‡å®šçš„å€¼æœ‰&amp;quot;first&amp;quot;, &amp;quot;last&amp;quot;, &amp;quot;before&amp;quot;, &amp;quot;after&amp;quot;
             &amp;quot;relative-to-action&amp;quot;å¦‚æœæŠŠ&amp;quot;anchor&amp;quot;çš„å€¼è®¾ç½®ä¸º&amp;quot;before&amp;quot;æˆ–è€…&amp;quot;after&amp;quot;æ—¶ï¼Œå¿…é¡»ä¸ºè¯¥å±æ€§èµ‹å€¼ï¼Œè¡¨ç¤ºç›¸å¯¹äºæŸä¸€ä¸ªActionçš„ä½ç½®--&amp;gt;
        &amp;lt;add-to-group group-id=&amp;quot;ToolsMenu&amp;quot; relative-to-action=&amp;quot;GenerateJavadoc&amp;quot; anchor=&amp;quot;after&amp;quot;/&amp;gt;
        &amp;lt;!-- &amp;lt;keyboard-shortcut&amp;gt;æŒ‡å®šActionçš„å¿«æ·é”®
             &amp;quot;second-keystroke&amp;quot;æŒ‡å®šActionæ¬¡é€‰å¿«æ·é”®
             &amp;quot;keymap&amp;quot;æŒ‡å®šActionçš„å¿«æ·é”®æ˜ å°„åˆ°å“ªä¸€ä¸ªç³»ç»Ÿä¸­ï¼Œå¯ä»¥è®¾å®šçš„å€¼ä½œä¸ºå¸¸é‡å®šä¹‰åœ¨
             com.intellij.openapi.keymap.KeymapManagerç±»ä¸­--&amp;gt;
        &amp;lt;keyboard-shortcut first-keystroke=&amp;quot;control alt G&amp;quot; second-keystroke=&amp;quot;C&amp;quot; keymap=&amp;quot;$default&amp;quot;/&amp;gt;
        &amp;lt;!-- æŒ‡å®šé¼ æ ‡å¿«æ·é”® --&amp;gt;
        &amp;lt;mouse-shortcut keystroke=&amp;quot;control button3 doubleClick&amp;quot; keymap=&amp;quot;$default&amp;quot;/&amp;gt;
    &amp;lt;/action&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;h1 id=&#34;ä½¿ç”¨ä»£ç è¿›è¡Œæ³¨å†Œ&#34;&gt;ä½¿ç”¨ä»£ç è¿›è¡Œæ³¨å†Œ&lt;/h1&gt;

&lt;p&gt;ä½¿ç”¨ä»£ç æ³¨å†Œå…¶å®ä¹Ÿæ²¡ä»€ä¹ˆå°‘ä»‹ç»çš„ï¼Œè´´ä¸€æ®µå®˜æ–¹ä»£ç å¤§å®¶å°±å¤§è‡´äº†è§£äº†ï¼Œå°±æ˜¯è°ƒç”¨ç›¸åº”çš„apiå»åšä¸€äº›é…ç½®&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-Java&#34;&gt;public class MyPluginRegistration implements ApplicationComponent {
  // Returns the component name (any unique string value).
  @NotNull public String getComponentName() {
    return &amp;quot;MyPlugin&amp;quot;;
  }


  // If you register the MyPluginRegistration class in the &amp;lt;application-components&amp;gt; section of
  // the plugin.xml file, this method is called on IDEA start-up.
  public void initComponent() {
    ActionManager am = ActionManager.getInstance();
    TextBoxes action = new TextBoxes();

    // Passes an instance of your custom TextBoxes class to the registerAction method of the ActionManager class.
    am.registerAction(&amp;quot;MyPluginAction&amp;quot;, action);

    // Gets an instance of the WindowMenu action group.
    DefaultActionGroup windowM = (DefaultActionGroup) am.getAction(&amp;quot;WindowMenu&amp;quot;);

    // Adds a separator and a new menu command to the WindowMenu group on the main menu.
    windowM.addSeparator();
    windowM.add(action);
  }

  // Disposes system resources.
  public void disposeComponent() {
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¸Šé¢ä¸¤ç§æ³¨å†Œæ–¹å¼æ˜¯ä¸æ˜¯éƒ½æ„Ÿè§‰æŒºéº»çƒ¦ï¼Œåœ¨ASä¸­æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªActivityçš„æ—¶å€™å¯ä»¥é€šè¿‡&lt;code&gt;File-&amp;gt;New-&amp;gt;Activity&lt;/code&gt;æ¥å¸®æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªActivityï¼Œå¹¶ä¸”å·²ç»å¸®æˆ‘ä»¬æ³¨å†Œåˆ°&lt;code&gt;AndroidManifest.xml&lt;/code&gt;ä¸­ï¼Œç”šè‡³æ˜¯å¸ƒå±€æ–‡ä»¶ä¹Ÿåˆ›å»ºå¥½äº†ï¼Œé‚£ä¹ˆIDEAèƒ½åšåˆ°å—ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œè€Œä¸”æ­¥éª¤ä¹Ÿå¤§åŒå°å¼‚ï¼š
&lt;img src=&#34;https://richardwrq.github.io/IDEAPlugin/å¿«é€Ÿåˆ›å»ºAction.jpg&#34; alt=&#34;å¿«é€Ÿåˆ›å»ºAction&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æ¥ä¸‹æ¥æˆ‘ä»¬ç‚¹å‡»è¿è¡Œæˆ–&lt;code&gt;Debug&lt;/code&gt;å³å¯çœ‹åˆ°è¿è¡Œæ•ˆæœ
&lt;img src=&#34;https://richardwrq.github.io/IDEAPlugin/è¿è¡Œæ•ˆæœ1.jpg&#34; alt=&#34;è¿è¡Œæ•ˆæœ1&#34; /&gt;
&lt;img src=&#34;https://richardwrq.github.io/IDEAPlugin/è¿è¡Œæ•ˆæœ2.jpg&#34; alt=&#34;è¿è¡Œæ•ˆæœ2&#34; /&gt;
&lt;img src=&#34;https://richardwrq.github.io/IDEAPlugin/è¿è¡Œæ•ˆæœ3.jpg&#34; alt=&#34;è¿è¡Œæ•ˆæœ3&#34; /&gt;&lt;/p&gt;

&lt;p&gt;åˆ°è¿™é‡Œç›¸ä¿¡ä½ ä¹Ÿäº†è§£äº†æ€ä¹ˆæ ·å»åˆ›å»ºå¹¶è¿è¡Œä¸€ä¸ªç®€å•çš„IDEAæ’ä»¶äº†ï¼Œæ•´ä¸ªè¿‡ç¨‹æ˜¯ä¸æ˜¯å’Œå¼€å‘ä¸€ä¸ªAndroidåº”ç”¨éå¸¸ç›¸åƒå‘¢ï¼Œå…¶å®éƒ½å¯ä»¥æŠŠä»–ä»¬çœ‹æˆæ˜¯å¼€å‘ä¸€ä¸ªå¸¦UIç•Œé¢çš„JVMåº”ç”¨ç¨‹åºï¼Œå½“ä½ å¼€å‘å¥½ä¸€ä¸ªæ’ä»¶ä¹‹åï¼Œéœ€è¦å°†å…¶ä¸Šä¼ åˆ°è¿œç¨‹ä»“åº“ä¸­ä»¥ä¾›ä»–äººä½¿ç”¨ï¼Œæ•´ä¸ªæµç¨‹å’Œå‘å¸ƒä¸€ä¸ªç¬¬ä¸‰æ–¹åº“ä¹Ÿæ˜¯å¤§åŒå°å¼‚ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>æ³¨è§£å¤„ç†å™¨Annotation Processorä¸­åˆ¤æ–­Javaæˆ–Kotlinç±»</title>
      <link>https://richardwrq.github.io/2018/judgejavaorkt/</link>
      <pubDate>Fri, 27 Apr 2018 19:45:50 +0800</pubDate>
      
      <guid>https://richardwrq.github.io/2018/judgejavaorkt/</guid>
      <description>&lt;p&gt;åœ¨Android Studioä¸­ï¼Œé¡¹ç›®ç¼–è¯‘buildä¹‹åkaptä¼šåœ¨é¡¹ç›®çš„&lt;code&gt;build/tmp/kapt3/stubs&lt;/code&gt;ç›®å½•ä¸‹ä¼šç”Ÿæˆkotlinç¼–å†™çš„ç±»çš„Javaâ€œå­˜æ ¹ç±»â€ï¼Œåœ¨è¿™äº›ç±»çš„é¡¶éƒ¨æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æœ‰è¿™æ ·ä¸€ä¸ªæ³¨è§£&lt;code&gt;@kotlin.Metadata(...)&lt;/code&gt;
 &lt;code&gt;@Metadata&lt;/code&gt;æ˜¯ Kotlin é‡Œæ¯”è¾ƒç‰¹æ®Šçš„ä¸€ä¸ªæ³¨è§£ã€‚å®ƒè®°å½•äº† Kotlin ä»£ç å…ƒç´ çš„ä¸€äº›ä¿¡æ¯ï¼Œæ¯”å¦‚ class çš„å¯è§æ€§ï¼Œfunction çš„è¿”å›å€¼ï¼Œå‚æ•°ç±»å‹ï¼Œproperty çš„ lateinitï¼Œnullable çš„å±æ€§ç­‰ç­‰ã€‚è¿™äº› Metadata çš„ä¿¡æ¯ç”± kotlinc ç”Ÿæˆï¼Œæœ€ç»ˆä¼šä»¥æ³¨è§£çš„å½¢å¼å­˜äº .class æ–‡ä»¶ã€‚
æ‰€ä»¥è¦åœ¨æ³¨è§£å¤„ç†å™¨åˆ¤æ–­ä¸€ä¸ªç±»æ˜¯kotlinè¯­è¨€æˆ–è€…Javaè¯­è¨€ç¼–å†™çš„æˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ¤æ–­è¯¥ç±»æ˜¯å¦æœ‰&lt;code&gt;@Metadata&lt;/code&gt;æ³¨è§£æ¥åŒºåˆ†ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;    /**
     * if true mean this class is java class
     */
    private fun isJavaFile(element: TypeElement): Boolean {
        val tmMetadata = mElements.getTypeElement(&amp;quot;kotlin.Metadata&amp;quot;).asType()
        return element.annotationMirrors.find { it.annotationType == tmMetadata } == null
    }
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨Kotlinæ‰“é€ Androidè·¯ç”±æ¡†æ¶-Krouter</title>
      <link>https://richardwrq.github.io/2018/krouter/</link>
      <pubDate>Fri, 27 Apr 2018 12:35:27 +0800</pubDate>
      
      <guid>https://richardwrq.github.io/2018/krouter/</guid>
      <description>

&lt;p&gt;&lt;strong&gt;KRouter&lt;/strong&gt;(&lt;a href=&#34;https://github.com/richardwrq/KRouter)è·¯ç”±æ¡†æ¶å€ŸåŠ©gradleæ’ä»¶ã€[kapt](https://blog.jetbrains.com/kotlin/2015/05/kapt-annotation-processing-for-kotlin/)å®ç°äº†ä¾èµ–æ³¨å…¥ã€ä¸ºAndroidå¹³å°é¡µé¢å¯åŠ¨æä¾›è·¯ç”±åŠŸèƒ½ã€‚&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;https://github.com/richardwrq/KRouter)è·¯ç”±æ¡†æ¶å€ŸåŠ©gradleæ’ä»¶ã€[kapt](https://blog.jetbrains.com/kotlin/2015/05/kapt-annotation-processing-for-kotlin/)å®ç°äº†ä¾èµ–æ³¨å…¥ã€ä¸ºAndroidå¹³å°é¡µé¢å¯åŠ¨æä¾›è·¯ç”±åŠŸèƒ½ã€‚&lt;/a&gt;
æºç ä¸å¤æ‚ï¼Œåœ¨å…³é”®åœ°æ–¹ä¹Ÿæœ‰æ³¨é‡Šè¯´æ˜ï¼Œå»ºè®®æ‰“ç®—æˆ–æ­£åœ¨ä½¿ç”¨kapt+kotlinpoeté‡åˆ°å‘çš„åŒå­¦å¯ä»¥forkä¸€ä¸‹é¡¹ç›®ï¼Œæˆ–è®¸èƒ½æ‰¾åˆ°ä½ æƒ³è¦çš„ç­”æ¡ˆï¼Œåªè¦å°†æ•´ä¸ªæµç¨‹äº†è§£æ¸…æ¥šäº†ï¼Œç›¸ä¿¡ä½ è‡ªå·±ä¹Ÿèƒ½æ’¸ä¸€ä¸ªè½®å­å‡ºæ¥ï¼Œç›®å‰è®¸å¤šå¼€æºæ¡†æ¶&lt;code&gt;dagger&lt;/code&gt;ã€&lt;code&gt;butter knife&lt;/code&gt;ã€&lt;code&gt;greendao&lt;/code&gt;ç­‰å®ç°åŸç†éƒ½æ˜¯ä¸€è‡´çš„ã€‚
####ä»startActivityå¼€å§‹è¯´èµ·
åœ¨ç»„ä»¶åŒ–å¼€å‘çš„å®è·µè¿‡ç¨‹ä¸­ï¼Œå½“æˆ‘å®Œæˆä¸€ä¸ªæ¨¡å—çš„å¼€å‘åï¼ˆæ¯”å¦‚è¯´è¿™ä¸ªæ¨¡å—ä¸­æœ‰ä¸€ä¸ªActivityæˆ–è€…Serviceä¾›è°ƒç”¨è€…è°ƒç”¨ï¼‰ï¼Œå…¶ä»–æ¨¡å—çš„å¼€å‘è€…è¦å¯åŠ¨æˆ‘è¿™ä¸ªæ¨¡å—ä¸­çš„Activityçš„ä»£ç æˆ‘ä»¬å†ç†Ÿæ‚‰ä¸è¿‡äº†ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;    val intent = Intent(this, MainActivity::class.java)
    intent.putExtra(&amp;quot;param1&amp;quot;, &amp;quot;1&amp;quot;)
    intent.putExtra(&amp;quot;param2&amp;quot;, &amp;quot;2&amp;quot;)
    startActivity(intent)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å½“ç„¶ï¼Œå…¶ä»–æ¨¡å—çš„å¼€å‘äººå‘˜éœ€è¦çŸ¥é“æˆ‘ä»¬è¿™ä¸ªActivityçš„ç±»åä»¥åŠä¼ å…¥çš„å‚æ•°å¯¹åº”çš„keyå€¼ï¼ˆä¸Šé¢çš„param1å’Œparam2ï¼‰ï¼Œè¿™æ—¶å€™æˆ‘å°±æƒ³ï¼Œåœ¨æ¯ä¸€ä¸ªéœ€è¦å¯åŠ¨è¿™ä¸ªé¡µé¢çš„åœ°æ–¹éƒ½å­˜åœ¨ç€ç±»ä¼¼çš„æ ·æ¿ä»£ç ï¼Œè€Œä¸”è¢«å¯åŠ¨çš„Activityåœ¨å–å‡ºå‚æ•°å¯¹å±æ€§è¿›è¡Œèµ‹å€¼æ—¶çš„ä»£ç ä¹Ÿæ¯”è¾ƒç¹çï¼Œäºæ˜¯åœ¨ç½‘ä¸ŠæŸ¥æ‰¾ç›¸å…³èµ„æ–™äº†è§£åˆ°ç›®å‰ä¸»æµçš„è·¯ç”±æ¡†æ¶ï¼ˆARouterã€Routerç­‰ï¼‰éƒ½æ”¯æŒè¿™äº›åŠŸèƒ½ï¼Œç§‰ç€å°½é‡ä¸é‡å¤é€ è½®å­çš„è§‚å¿µæˆ‘forkäº†ARouteré¡¹ç›®ï¼Œä½†æ˜¯é˜…è¯»æºç åå‘ç°å…¶æš‚æ—¶ä¸æ”¯æŒServiceçš„å¯åŠ¨ï¼Œè€Œæˆ‘è´Ÿè´£çš„é¡¹ç›®é‡Œé¢å…¨æ˜¯è¿è¡Œåœ¨åå°çš„Serviceã€‚ã€‚ã€‚ç´§æ¥ç€ä¹Ÿå¤§æ¦‚äº†è§£äº†ä¸€ä¸‹å…¶ä»–ä¸€äº›æ¡†æ¶ï¼Œéƒ½å­˜åœ¨ä¸€äº›ä¸å¤ªæ»¡æ„çš„åœ°æ–¹ï¼Œè€ƒè™‘å†ä¸‰ï¼Œå¹²è„†è‡ªå·±æ’¸ä¸€ä¸ªè½®å­å‡ºæ¥å¥½äº†ã€‚&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;é¦–å…ˆæ¥çœ‹ä¸€æ®µæœ€ç®€å•çš„å‘èµ·è·¯ç”±è¯·æ±‚çš„ä»£ç (Javaè°ƒç”¨)ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;    KRouter.INSTANCE.create(&amp;quot;krouter/main/activity?test=32&amp;quot;)
                    .withFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)
                    .withString(&amp;quot;test2&amp;quot;, &amp;quot;this is test2&amp;quot;)
                    .request();
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å…¶ä¸­&lt;code&gt;krouter/main/activity?test=32&lt;/code&gt;ä¸ºå¯¹åº”çš„è·¯ç”±è·¯å¾„ï¼Œå¯ä»¥ä½¿ç”¨ç±»ä¼¼httpè¯·æ±‚çš„æ ¼å¼ï¼Œåœ¨é—®å·åç´§æ¥ç€çš„æ˜¯è¯·æ±‚å‚æ•°ï¼Œè¿™äº›å‚æ•°æœ€ç»ˆä¼šè‡ªåŠ¨åŒ…è£…åœ¨intentçš„extrasä¸­ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è°ƒç”¨&lt;code&gt;with&lt;/code&gt;å¼€å¤´çš„å‡½æ•°æ¥é…ç½®è¯·æ±‚å‚æ•°ã€‚
ä¸Šé¢çš„ä»£ç æ‰§è¡Œåæœ€ç»ˆä¼šå¯åŠ¨ä¸€ä¸ªActivityï¼Œå‡†ç¡®æ¥è¯´æ˜¯ä¸€ä¸ªå¸¦æœ‰&lt;code&gt;@Route&lt;/code&gt;æ³¨è§£çš„Activityï¼Œå®ƒé•¿è¿™æ ·ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;    @Route(path = &amp;quot;krouter/main/activity&amp;quot;)
    public class MainActivity extends Activity {
        ...
        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
            getIntent().getIntExtra(&amp;quot;test&amp;quot;, -1);//è¿™é‡Œå¯ä»¥è·å–åˆ°è¯·æ±‚å‚æ•°test
        }
        ...
    }
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªæœ€åŸºæœ¬çš„åŠŸèƒ½ï¼Œæ€ä¹ˆæ ·ï¼Œçœ‹èµ·æ¥è¿˜ä¸é”™å§ï¼Ÿè·Ÿå¤§éƒ¨åˆ†è·¯ç”±æ¡†æ¶çš„è°ƒç”¨æ–¹å¼å·®ä¸å¤šã€‚ç°åœ¨ä¸»æµçš„è·¯ç”±æ¡†æ¶æ˜¯æ€ä¹ˆåšåˆ°çš„å‘¢ï¼Ÿä¸‹é¢å°±çœ‹æˆ‘ä¸€ä¸€é“æ¥ã€‚&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;åœ¨ä½¿ç”¨&lt;code&gt;KRouter&lt;/code&gt;çš„APIå‰é¦–å…ˆéœ€è¦ä¸ºä¸€äº›ç±»æ·»åŠ æ³¨è§£ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;/**
 * User: WuRuiqiang(263454190@qq.com)
 * Date: 18/1/2
 * Time: ä¸Šåˆ10:53
 * Version: v1.0
 * Descriptionï¼šç”¨äºæ ‡è®°å¯è·¯ç”±çš„ç»„ä»¶
 */
@Target(AnnotationTarget.CLASS)
@Retention(AnnotationRetention.SOURCE)
annotation class Route(
        /**
         * Path of route
         */
        val path: String,
        /**
         * PathPrefix of route
         */
        val pathPrefix: String = &amp;quot;&amp;quot;,
        /**
         * PathPattern of route
         */
        val pathPattern: String = &amp;quot;&amp;quot;,
        /**
         * Name of route
         */
        val name: String = &amp;quot;undefined&amp;quot;,
        /**
         * Priority of route
         */
        val priority: Int = -1)

/**
 * User: WuRuiqiang(263454190@qq.com)
 * Date: 18/1/2
 * Time: ä¸Šåˆ10:53
 * Version: v1.0
 * Descriptionï¼šç”¨äºæ‹¦æˆªè·¯ç”±çš„æ‹¦æˆªå™¨
 */
@Target(AnnotationTarget.CLASS)
@Retention(AnnotationRetention.SOURCE)
annotation class Interceptor(
        /**
         * Priority of interceptor
         */
        val priority: Int = -1,
        /**
         * Name of interceptor
         */
        val name: String = &amp;quot;DefaultInterceptor&amp;quot;)

/**
 * User: WuRuiqiang(263454190@qq.com)
 * Date: 18/1/2
 * Time: ä¸Šåˆ10:53
 * Version: v1.0
 * Descriptionï¼šå±æ€§æ³¨å…¥
 */
@Target(AnnotationTarget.FIELD)
@Retention(AnnotationRetention.SOURCE)
annotation class Inject(
        /**
         * Name of property
         */
        val name: String = &amp;quot;&amp;quot;,
        /**
         * If true, app will be throws NPE when value is null
         */
        val isRequired: Boolean = false,
        /**
         * Description of the field
         */
        val desc: String = &amp;quot;No desc.&amp;quot;)

/**
 * User: WuRuiqiang(263454190@qq.com)
 * Date: 18/1/2
 * Time: ä¸Šåˆ10:53
 * Version: v1.0
 * Descriptionï¼šProvider
 */
@Target(AnnotationTarget.CLASS)
@Retention(AnnotationRetention.SOURCE)
annotation class Provider(/**
                           * Path of Provider
                           */
                          val value: String)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¢«æ³¨è§£çš„å…ƒç´ çš„ä¿¡æ¯æœ€ç»ˆè¢«ä¿å­˜åœ¨å¯¹åº”çš„æ•°æ®ç±»ä¸­ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;/**
 * User: WuRuiqiang(263454190@qq.com)
 * Date: 18/1/4
 * Time: ä¸Šåˆ10:46
 * Version: v1.0
 * Descriptionï¼šRouteå…ƒæ•°æ®ï¼Œç”¨äºå­˜å‚¨è¢«[com.github.richardwrq.krouter.annotation.Route]æ³¨è§£çš„ç±»çš„ä¿¡æ¯
 */
data class RouteMetadata(
        /**
         * Type of Route
         */
        val routeType: RouteType = RouteType.UNKNOWN,
        /**
         * Priority of route
         */
        val priority: Int = -1,
        /**
         * Name of route
         */
        val name: String = &amp;quot;undefine&amp;quot;,
        /**
         * Path of route
         */
        val path: String = &amp;quot;&amp;quot;,
        /**
         * PathPrefix of route
         */
        val pathPrefix: String = &amp;quot;&amp;quot;,
        /**
         * PathPattern of route
         */
        val pathPattern: String = &amp;quot;&amp;quot;,
        /**
         * Class of route
         */
        val clazz: Class&amp;lt;*&amp;gt; = Any::class.java)
/**
 * User: WuRuiqiang(263454190@qq.com)
 * Date: 18/1/8
 * Time: ä¸‹åˆ10:46
 * Version: v1.0
 * Descriptionï¼šInterceptorå…ƒæ•°æ®ï¼Œç”¨äºå­˜å‚¨è¢«[com.github.richardwrq.krouter.annotation.Interceptor]æ³¨è§£çš„ç±»çš„ä¿¡æ¯
 */
data class InterceptorMetaData(
        /**
         * Priority of Interceptor
         */
        val priority: Int = -1,
        /**
         * Name of Interceptor
         */
        val name: String = &amp;quot;undefine&amp;quot;,
        /**
         * Class desc of Interceptor
         */
        val clazz: Class&amp;lt;*&amp;gt; = Any::class.java)

/**
 * User: WuRuiqiang(263454190@qq.com)
 * Date: 18/3/14
 * Time: ä¸Šåˆ1:28
 * Version: v1.0
 * Descriptionï¼šInjectorå…ƒæ•°æ®ï¼Œç”¨äºå­˜å‚¨è¢«[com.github.richardwrq.krouter.annotation.Inject]æ³¨è§£çš„ç±»çš„ä¿¡æ¯
 */
data class InjectorMetaData(
        /**
         * if true, throw NPE when the filed is null
         */
        val isRequired: Boolean = false,
        /**
         * key
         */
        val key: String = &amp;quot;&amp;quot;,
        /**
         * field name
         */
        val fieldName: String = &amp;quot;&amp;quot;)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å…¶ä¸­è¢«&lt;strong&gt;@Route&lt;/strong&gt;æ³¨è§£çš„ç±»æ˜¯Androidä¸­çš„å››å¤§ç»„ä»¶å’ŒFragmentæˆ–è€…å®ƒä»¬çš„å­ç±»ï¼ˆç›®å‰å°šä¸æ”¯æŒBroadcastä»¥åŠContentProviderï¼‰ï¼Œè¢«&lt;strong&gt;@Route&lt;/strong&gt;æ³¨è§£çš„å¯¹è±¡ç›®å‰æœ‰3ç§å¤„ç†æ–¹å¼ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;è‹¥è¢«æ³¨è§£çš„ç±»æ˜¯Activityçš„å­ç±»ï¼Œé‚£ä¹ˆæœ€ç»ˆçš„å¤„ç†æ–¹å¼æ˜¯startActivityï¼›&lt;/li&gt;
&lt;li&gt;è‹¥è¢«æ³¨è§£çš„ç±»æ˜¯Serviceçš„å­ç±»ï¼Œæœ€ç»ˆçš„å¤„ç†æ–¹å¼æœ‰ä¸¤ç§ï¼Œä¹Ÿå°±  æ˜¯Androidä¸­å¯åŠ¨Serviceçš„ä¸¤ç§æ–¹å¼ï¼Œä½¿ç”¨å“ªç§å¯åŠ¨æ–¹å¼å–å†³äºæ˜¯å¦è°ƒç”¨äº†&lt;code&gt;withServiceConn&lt;/code&gt;å‡½æ•°æ·»åŠ äº†ServiceConnectionï¼›&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;è‹¥è¢«æ³¨è§£çš„ç±»æ˜¯Fragmentçš„å­ç±»ï¼Œæœ€ç»ˆçš„å¤„ç†æ–¹å¼æ˜¯è°ƒç”¨æ— å‚æ„é€ å‡½æ•°æ„é€ å‡ºè¿™ä¸ªç±»çš„å®ä¾‹ï¼Œå¹¶è°ƒç”¨&lt;code&gt;setArguments(Bundle args)&lt;/code&gt;å°†è¯·æ±‚å‚æ•°ä¼ å…¥Fragmentçš„bundleä¸­ï¼Œæœ€åè¿”å›è¯¥å®ä¾‹&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;è¢«&lt;strong&gt;@Interceptor&lt;/strong&gt;æ³¨è§£çš„ç±»éœ€å®ç°&lt;strong&gt;IRouteInterceptor&lt;/strong&gt;æ¥å£ï¼Œè¿™äº›ç±»ä¸»è¦å¤„ç†æ˜¯å¦æ‹¦æˆªè·¯ç”±çš„é€»è¾‘ï¼Œæ¯”å¦‚æŸäº›éœ€è¦ç™»å½•æ‰èƒ½å¯åŠ¨çš„ç»„ä»¶ï¼Œå°±å¯ä»¥ç”¨åˆ°æ‹¦æˆªå™¨
&lt;strong&gt;@Inject&lt;/strong&gt;ç”¨äºæ ‡è®°éœ€è¦è¢«æ³¨å…¥çš„å±æ€§
è¢«&lt;strong&gt;@Provider&lt;/strong&gt;æ³¨è§£çš„ç±»æœ€ç»ˆå¯ä»¥è°ƒç”¨&lt;code&gt;KRouter.getProvider(path: String)&lt;/code&gt;æ–¹æ³•è·å–è¯¥ç±»çš„å¯¹è±¡ï¼Œå¦‚æœè¯¥ç±»å®ç°äº†&lt;strong&gt;IProvider&lt;/strong&gt;æ¥å£ï¼Œé‚£ä¹ˆ&lt;code&gt;init(context: Context)&lt;/code&gt;æ–¹æ³•å°†è¢«è°ƒç”¨
è¿™äº›æ³¨è§£æœ€ç»ˆéƒ½ä¸ä¼šè¢«ç¼–è¯‘è¿›classæ–‡ä»¶ä¸­ï¼Œåœ¨ç¼–è¯‘æ—¶æœŸè¿™äº›æ³¨è§£ä¼šè¢«æ”¶é›†èµ·æ¥æœ€ç»ˆäº¤ç”±ä¸åŒçš„Annotation Processorå»å¤„ç†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;KRouter&lt;/strong&gt;è·¯ç”±æ¡†æ¶åˆ†ä¸º3ä¸ªæ¨¡å—ï¼š
- &lt;strong&gt;KRouter-api&lt;/strong&gt;æ¨¡å—ï¼Œä½œä¸ºSDKæä¾›APIä¾›åº”ç”¨è°ƒç”¨ï¼Œè°ƒç”¨&lt;strong&gt;KRouter-compiler&lt;/strong&gt;æ¨¡å—ç”Ÿæˆçš„ç±»ä¸­çš„æ–¹æ³•åŠ è½½è·¯ç”±è¡¨ï¼Œå¤„ç†è·¯ç”±è¯·æ±‚
- &lt;strong&gt;KRouter-compiler&lt;/strong&gt;æ¨¡å—ï¼Œå„ç§æ³¨è§£å¯¹åº”çš„Processorçš„é›†åˆï¼Œç¼–è¯‘æœŸè¿è¡Œï¼Œè´Ÿè´£æ”¶é›†è·¯ç”±ç»„ä»¶ï¼Œå¹¶ç”Ÿæˆkotlinä»£ç 
- &lt;strong&gt;KRouter-gradle-plugin&lt;/strong&gt;æ¨¡å—ï¼Œè‡ªå®šä¹‰gradleæ’ä»¶ï¼Œåœ¨é¡¹ç›®æ„å»ºæ—¶æœŸæ·»åŠ ç›¸å…³ä¾èµ–ä»¥åŠç›¸å…³å‚æ•°çš„é…ç½®&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://upload-images.jianshu.io/upload_images/745509-d2b8cacc05798b3f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&#34; alt=&#34;å„æ¨¡å—è¿è¡Œæ—¶æœŸ.png&#34; /&gt;&lt;/p&gt;

&lt;p&gt;#####KRouter-compiler
åœ¨ä»‹ç»è¯¥æ¨¡å—ä¹‹å‰å¦‚æœæœ‰åŒå­¦ä¸çŸ¥é“&lt;strong&gt;Annotation Processor&lt;/strong&gt;çš„è¯å»ºè®®å…ˆé˜…è¯» &lt;a href=&#34;http://blog.csdn.net/hj7jay/article/details/52180023&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;Annotation Processing-Toolè¯¦è§£&lt;/a&gt;ï¼Œ &lt;a href=&#34;http://blog.csdn.net/u013045971/article/details/53509237&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;ä¸€å°æ—¶ææ˜ç™½æ³¨è§£å¤„ç†å™¨ï¼ˆAnnotation Processor Toolï¼‰&lt;/a&gt;è¿™ä¸¤ç¯‡æ–‡ç« ï¼Œç®€å•æ¥è¯´ï¼ŒAPTå°±æ˜¯&lt;code&gt;javac&lt;/code&gt;æä¾›çš„ä¸€ä¸ªæ’ä»¶ï¼Œå®ƒä¼šæœé›†è¢«æŒ‡å®šæ³¨è§£æ‰€æ³¨è§£çš„å…ƒç´ ï¼ˆç±»ã€æ–¹æ³•æˆ–è€…å±æ€§ï¼‰ï¼Œæœ€ç»ˆå°†æœé›†åˆ°çš„è¿™äº›äº¤ç»™æ³¨è§£å¤„ç†å™¨&lt;strong&gt;Annotation Processor&lt;/strong&gt;è¿›è¡Œå¤„ç†ï¼Œæ³¨è§£å¤„ç†å™¨é€šå¸¸ä¼šç”Ÿæˆä¸€äº›æ–°çš„ä»£ç ï¼ˆæ¨èå¤§åé¼é¼çš„squareå›¢é˜Ÿé€ çš„è½®å­&lt;strong&gt;&lt;a href=&#34;https://github.com/square/javapoet&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;javapoet&lt;/a&gt;&lt;/strong&gt;ï¼Œè¿™ä¸ªå¼€æºåº“æä¾›äº†éå¸¸å‹å¥½çš„APIè®©æˆ‘ä»¬å»ç”ŸæˆJavaä»£ç ï¼‰ï¼Œè¿™äº›æ–°ç”Ÿæˆçš„ä»£ç ä¼šä¸æºç ä¸€èµ·åœ¨åŒä¸€ä¸ªç¼–è¯‘æ—¶æœŸè¿›è¡Œç¼–è¯‘ã€‚
ä½†æ˜¯&lt;strong&gt;Annotation Processor&lt;/strong&gt;æ˜¯&lt;code&gt;javac&lt;/code&gt;æä¾›çš„ä¸€ä¸ªæ’ä»¶ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒåªè®¤è¯†Javaä»£ç ï¼Œå®ƒå‹æ ¹ä¸çŸ¥é“kotlinæ˜¯ä»€ä¹ˆï¼Œæ‰€ä»¥å¦‚æœæ˜¯ç”¨kotlinç¼–å†™çš„ä»£ç æ–‡ä»¶æœ€ç»ˆå°†ä¼šè¢«&lt;code&gt;javac&lt;/code&gt;ç»™å¿½ç•¥ï¼Œæ‰€å¹¸çš„æ˜¯JetBrainsåœ¨2015å¹´å°±æ¨å‡ºäº†&lt;a href=&#34;https://blog.jetbrains.com/kotlin/2015/05/kapt-annotation-processing-for-kotlin/&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;kapt&lt;/a&gt;æ¥è§£å†³è¿™ä¸€é—®é¢˜ã€‚è€Œä¸”æ—¢ç„¶æœ‰javapoetï¼Œé‚£squareé‚£ä¹ˆç‰›é€¼çš„å›¢é˜Ÿè‚¯å®šä¹Ÿä¼šé€ ä¸€ä¸ªç”Ÿæˆkotlinä»£ç çš„è½®å­å§ï¼Œæœä¸å…¶ç„¶ï¼Œåœ¨githubä¸€æœkotlinpoetï¼Œè¿˜çœŸæœ‰ï¼Œæ‰€ä»¥æœ€ç»ˆå†³å®š&lt;strong&gt;KRouter-compiler&lt;/strong&gt;æ¨¡å—ä½¿ç”¨&lt;strong&gt;kapt&lt;/strong&gt;+&lt;strong&gt;&lt;a href=&#34;https://github.com/square/kotlinpoet&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;kotlinpoet&lt;/a&gt;&lt;/strong&gt;æ¥è‡ªåŠ¨ç”Ÿæˆä»£ç ï¼ˆkotlinpoetæ–‡æ¡£è¿‡äºç®€å•äº†ï¼Œå»ºè®®ä½¿ç”¨è¯¥åº“çš„åŒå­¦é€šè¿‡å®ƒçš„æµ‹è¯•ç”¨ä¾‹æˆ–è€…å‚ç…§Javapoetæ–‡æ¡£äº†è§£APIçš„è°ƒç”¨ï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;å¼€å¤´çš„ä¾‹å­ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä½¿ç”¨&lt;strong&gt;KRouter&lt;/strong&gt;å¯åŠ¨ä¸€ä¸ªActivityåªéœ€è¦çŸ¥é“è¯¥Activityçš„è·¯å¾„å³å¯ï¼Œå¹¶ä¸éœ€è¦åƒAndroidåŸç”Ÿçš„å¯åŠ¨æ–¹å¼ä¸€æ ·ä¼ å…¥&lt;code&gt;Class&amp;lt;*&amp;gt;&lt;/code&gt;æˆ–è€…&lt;code&gt;Class Name&lt;/code&gt;ï¼Œé‚£ä¹ˆ&lt;strong&gt;KRouter&lt;/strong&gt;æ˜¯æ€ä¹ˆåšåˆ°çš„å‘¢ï¼Ÿ
åŸç†å¾ˆç®€å•ï¼Œ&lt;strong&gt;KRouter-compiler&lt;/strong&gt;æ¨¡å—ç”Ÿäº†åˆå§‹åŒ–&lt;code&gt;è·¯ç”±è¡¨&lt;/code&gt;çš„ä»£ç ï¼Œè¿™äº›&lt;code&gt;è·¯ç”±è¡¨&lt;/code&gt;å†…éƒ¨å…¶å®å°±æ˜¯ä¸€ä¸ªä¸ªmapï¼Œè¿™äº›mapä»¥è·¯å¾„pathä½œä¸ºkeyï¼Œæ•°æ®ç±»ä½œä¸ºvalueï¼ˆæ¯”å¦‚&lt;strong&gt;RouteMetadata&lt;/strong&gt;ï¼‰ï¼ŒSDKå†…éƒ¨ä¼šé€šè¿‡pathè·å–åˆ°æ•°æ®ç±»ï¼Œåƒå¼€å¤´å¯åŠ¨Activityçš„ä¾‹å­ä¸­ï¼ŒSDKå°±é€šè¿‡pathè·å–åˆ°ä¸€ä¸ª&lt;strong&gt;RouteMetadata&lt;/strong&gt;å¯¹è±¡ï¼Œåœ¨è¿™ä¸ªå¯¹è±¡ä¸­å–å‡ºè¢«æ³¨è§£çš„ç±»çš„&lt;code&gt;Class&amp;lt;*&amp;gt;&lt;/code&gt;ï¼Œæœ‰äº†è¿™ä¸ª&lt;code&gt;Class&amp;lt;*&amp;gt;&lt;/code&gt;å°±å¯ä»¥å®Œæˆå¯åŠ¨Activityçš„æ“ä½œã€‚
æ¥ä¸‹æ¥è¯´è¯´&lt;code&gt;è·¯ç”±è¡¨&lt;/code&gt;åˆå§‹åŒ–ä»£ç ç”Ÿæˆä¹‹åæ˜¯æ€ä¹ˆè¢«æ‰§è¡Œçš„ï¼Œé¦–å…ˆæˆ‘å®šä¹‰äº†è¿™æ ·ä¸€äº›æ¥å£ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;/**
 * åŠ è½½è·¯ç”±
 *
 * @author: Wuruiqiang &amp;lt;a href=&amp;quot;mailto:263454190@qq.com&amp;quot;&amp;gt;Contact me.&amp;lt;/a&amp;gt;
 * @version: v1.0
 * @since: 18/1/4 ä¸‹åˆ6:38
 */
interface IRouteLoader {
    fun loadInto(map: MutableMap&amp;lt;String, RouteMetadata&amp;gt;)
}

/**
 * åŠ è½½æ‹¦æˆªå™¨
 *
 * @author: Wuruiqiang &amp;lt;a href=&amp;quot;mailto:263454190@qq.com&amp;quot;&amp;gt;Contact me.&amp;lt;/a&amp;gt;
 * @version: v1.0
 * @since: 18/1/5 ä¸Šåˆ9:12
 */
interface IInterceptorLoader {
    fun loadInto(map: TreeMap&amp;lt;Int, InterceptorMetaData&amp;gt;)
}

/**
 * åŠ è½½Provider
 *
 * @author: Wuruiqiang &amp;lt;a href=&amp;quot;mailto:263454190@qq.com&amp;quot;&amp;gt;Contact me.&amp;lt;/a&amp;gt;
 * @version: v1.0
 * @since: 18/1/5 ä¸Šåˆ9:12
 */
interface IProviderLoader {
    fun loadInto(map: MutableMap&amp;lt;String, Class&amp;lt;*&amp;gt;&amp;gt;)
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä»¥&lt;strong&gt;@Route&lt;/strong&gt;æ³¨è§£ä¸ºä¾‹ï¼Œåœ¨&lt;strong&gt;KRouter-compiler&lt;/strong&gt;ä¸­å®šä¹‰äº†ä¸€ä¸ªç»§æ‰¿è‡ª&lt;strong&gt;AbstractProcessor&lt;/strong&gt;çš„ç±»&lt;strong&gt;RouteProcessor&lt;/strong&gt;ï¼Œåœ¨ç¼–è¯‘æœŸé—´ç¼–è¯‘å™¨ä¼šæ”¶é›†&lt;strong&gt;@Route&lt;/strong&gt;æ³¨è§£çš„å…ƒç´ çš„ä¿¡æ¯ç„¶åäº¤ç”±&lt;strong&gt;RouteProcessor&lt;/strong&gt;å¤„ç†ï¼Œ&lt;strong&gt;RouteProcessor&lt;/strong&gt;ä¼šç”Ÿæˆä¸€ä¸ªå®ç°äº†&lt;strong&gt;IRouteLoader&lt;/strong&gt;æ¥å£çš„ç±»ï¼Œåœ¨&lt;code&gt;loadInto&lt;/code&gt;æ–¹æ³•ä¸­æŠŠæ³¨è§£ä¸­çš„å…ƒæ•°æ®ä¸è¢«æ³¨è§£çš„å…ƒç´ çš„éƒ¨åˆ†ä¿¡æ¯å­˜åˆ°&lt;strong&gt;RouteMetadata&lt;/strong&gt;å¯¹è±¡ï¼Œç„¶åå°†æ³¨è§£çš„è·¯å¾„pathä½œä¸ºkeyï¼Œ&lt;strong&gt;RouteMetadata&lt;/strong&gt;å¯¹è±¡ä½œä¸ºvalueä¿å­˜åœ¨ä¸€ä¸ªmapå½“ä¸­ã€‚ç”Ÿæˆçš„ä»£ç å¦‚ä¸‹ï¼ˆé¡¹ç›®buildä¹‹åå¯ä»¥åœ¨&lt;code&gt;(module)/build/generated/source/kaptKotlin/(buildType)&lt;/code&gt;ç›®å½•ä¸‹æ‰¾åˆ°è¿™äº›è‡ªåŠ¨ç”Ÿæˆçš„ç±»ï¼‰ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;/**
 *    ***************************************************
 *    * THIS CODE IS GENERATED BY KRouter, DO NOT EDIT. *
 *    ***************************************************
 */
class KRouter_RouteLoader_app : IRouteLoader {
    override fun loadInto(map: MutableMap&amp;lt;String, RouteMetadata&amp;gt;) {
        map[&amp;quot;krouter/sample/MainActivity&amp;quot;] = RouteMetadata(RouteType.ACTIVITY, -1, &amp;quot;undefined&amp;quot;, &amp;quot;krouter/sample/MainActivity&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;, MainActivity::class.java)
        map[&amp;quot;myfragment&amp;quot;] = RouteMetadata(RouteType.FRAGMENT_V4, -1, &amp;quot;undefined&amp;quot;, &amp;quot;myfragment&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;, MainActivity.MyFragment::class.java)
        map[&amp;quot;krouter/sample/fragment1&amp;quot;] = RouteMetadata(RouteType.FRAGMENT, -1, &amp;quot;undefined&amp;quot;, &amp;quot;krouter/sample/fragment1&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;, Fragment1::class.java)
        map[&amp;quot;krouter/sample/fragment2&amp;quot;] = RouteMetadata(RouteType.FRAGMENT, -1, &amp;quot;undefined&amp;quot;, &amp;quot;krouter/sample/fragment2&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;, Fragment2::class.java)
        map[&amp;quot;krouter/sample/Main2Activity&amp;quot;] = RouteMetadata(RouteType.ACTIVITY, -1, &amp;quot;undefined&amp;quot;, &amp;quot;krouter/sample/Main2Activity&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;, Main2Activity::class.java)
        map[&amp;quot;krouter/sample/Main3Activity&amp;quot;] = RouteMetadata(RouteType.ACTIVITY, -1, &amp;quot;undefined&amp;quot;, &amp;quot;krouter/sample/Main3Activity&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;, Main3Activity::class.java)
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä»£ç ç”Ÿæˆä¹‹åï¼Œæˆ‘ä»¬éœ€è¦æ‰§è¡Œ&lt;code&gt;loadInto&lt;/code&gt;æ–¹æ³•æ‰ç®—æ˜¯æŠŠæ•°æ®å­˜å…¥åˆ°mapä¸­å»ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡&lt;code&gt;Class.forName(ClassName).newInstance()&lt;/code&gt;è·å–è¯¥ç±»å®ä¾‹ï¼Œç„¶åå°†å…¶å¼ºåˆ¶è½¬æ¢ä¸º&lt;strong&gt;IRouteLoader&lt;/strong&gt;ç±»å‹ï¼Œæ¥ç€è°ƒç”¨&lt;code&gt;loadInto&lt;/code&gt;æ–¹æ³•ä¼ å…¥mapå³å¯ï¼Œç°åœ¨é—®é¢˜æ¥äº†ï¼ŒåŠ è½½ä¸€ä¸ªç±»æˆ‘ä»¬éœ€è¦çŸ¥é“è¿™ä¸ªç±»çš„è·¯å¾„å’Œåç§°ï¼š&lt;code&gt;com.x.y.ClassA&lt;/code&gt;ï¼Œä½†æ˜¯SDKå¹¶ä¸çŸ¥é“&lt;strong&gt;KRouter-compiler&lt;/strong&gt;ä¼šç”Ÿæˆå“ªäº›ç±»ã€‚
ä¸ºæ­¤æˆ‘å‡†å¤‡äº†ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼š
1. ç±»ä¼¼&lt;code&gt;ARouter&lt;/code&gt;çš„åšæ³•ï¼Œæ‰«ææ‰€æœ‰dexæ–‡ä»¶ï¼Œæ‰¾å‡ºå®ç°äº†&lt;code&gt;ARouter&lt;/code&gt;æ¥å£çš„ç±»ï¼Œç„¶åå°†è¿™äº›ç±»çš„ClassNameç¼“å­˜è‡³æœ¬åœ°ï¼Œä¸‹æ¬¡åº”ç”¨å¯åŠ¨æ—¶å¦‚æœå­˜åœ¨ç¼“å­˜ä¸”æ²¡æœ‰æ–°å¢æ–‡ä»¶åˆ™è¯»å–ç¼“å­˜å†…å®¹å³å¯ï¼›
2. ç¬¬äºŒç§æ˜¯ç”Ÿæˆçš„ç±»åŠå…¶è·¯å¾„éµå¾ªä¸€å®šçš„è§„åˆ™ï¼Œæ¯”å¦‚ç”±&lt;strong&gt;RouteProcessor&lt;/strong&gt;ç”Ÿæˆçš„ç±»è·¯å¾„è§„å®šä¸º&lt;code&gt;com.github.richardwrq.krouter&lt;/code&gt;ï¼Œç±»åè§„å®šä»¥â€œKRouter_RouteLoader_â€ä½œä¸ºå¼€å¤´ç„¶åæ‹¼æ¥ä¸ŠModuleåç§°ï¼ˆä»¥Moduleåç§°ä½œä¸ºåç¼€æ˜¯é¿å…åœ¨ä¸åŒçš„Moduleä¸‹ç”Ÿæˆç±»åä¸€æ ·çš„ç±»ï¼Œå¯¼è‡´ç¼–è¯‘æ—¶å‡ºç°ç±»é‡å¤å®šä¹‰å¼‚å¸¸ï¼‰ï¼Œæ‰€ä»¥&lt;strong&gt;RouteProcessor&lt;/strong&gt;åç§°ä¸º&lt;code&gt;app&lt;/code&gt;çš„Moduleä¸‹ç”Ÿæˆçš„ç±»å°±æ˜¯&lt;code&gt;com.github.richardwrq.krouter.KRouter_RouteLoader_app&lt;/code&gt;ï¼Œåœ¨ç¨‹åºè¿è¡Œçš„æ—¶å€™ï¼Œæˆ‘ä»¬çš„SDKåªéœ€è¦è·å–é¡¹ç›®ä¸­æ‰€æœ‰Moduleçš„åç§°ï¼Œç„¶åä¾æ¬¡åŠ è½½å®ƒä»¬å¹¶æ‰§è¡Œ&lt;code&gt;loadInto&lt;/code&gt;æ–¹æ³•å³å¯ã€‚&lt;/p&gt;

&lt;p&gt;åŸºäºæ€§èƒ½è€ƒè™‘æˆ‘é‡‡å–äº†ç¬¬äºŒç§æ–¹æ¡ˆï¼Œè¿™å°±éœ€è¦è§£å†³ä¸€ä¸ªé—®é¢˜ï¼Œå› ä¸º&lt;strong&gt;RouteProcessor&lt;/strong&gt;æ˜¯æ— æ³•çŸ¥é“å½“å‰æ˜¯å¤„äºå“ªä¸ªModuleçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨Moduleçš„&lt;code&gt;build.gradle&lt;/code&gt;åšå¦‚ä¸‹é…ç½®ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-groovy&#34;&gt;kapt {
    arguments {
        arg(&amp;quot;moduleName&amp;quot;, project.getName())
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿™æ ·æˆ‘ä»¬å°±é…ç½®äº†ä¸€ä¸ªåä¸ºâ€œmoduleNameâ€çš„å‚æ•°ï¼Œå®ƒçš„å€¼å°±æ˜¯å½“å‰Moduleçš„åç§°ã€‚è¿™ä¸ªå‚æ•°å¯ä»¥åœ¨&lt;strong&gt;ProcessingEnvironment&lt;/strong&gt;çš„&lt;code&gt;getOptions()&lt;/code&gt;æ–¹æ³•è·å–çš„mapä¸­å–å‡ºï¼Œ
&lt;strong&gt;Route&lt;/strong&gt;ã€&lt;strong&gt;Interceptor&lt;/strong&gt;ã€&lt;strong&gt;Provider&lt;/strong&gt;ä¸‰è€…çš„å¤„ç†æµç¨‹å¤§è‡´ç›¸åŒï¼Œå°±ä¸ä¸€ä¸€èµ˜è¿°äº†ã€‚
åœ¨è¿™é‡Œæä¸€ä¸‹å…³äºä¾èµ–æ³¨å…¥&lt;strong&gt;Inject&lt;/strong&gt;çš„å®ç°ï¼Œå…³äºå¦‚ä½•å¯¹å±æ€§è¿›è¡Œæ³¨å…¥æˆ‘æƒ³äº†ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼š
1. ç¬¬ä¸€ç§å°±æ˜¯é€šè¿‡åå°„ï¼Œäº†è§£åå°„çš„åŒå­¦éƒ½çŸ¥é“å¯ä»¥é€šè¿‡åå°„è·å–ç±»çš„è¿è¡Œæ—¶æ³¨è§£ï¼Œå¹¶ä¸”é€šè¿‡åå°„APIä¸ºç±»çš„å±æ€§è¿›è¡Œèµ‹å€¼ï¼Œä½†ç”±äºæ—¶åå°„ï¼Œæ‰€ä»¥æ€§èƒ½ä¸Šæœ‰æ‰€æŸè€—ï¼Œä½†æ˜¯å¯ä»¥æ— è§†å±æ€§çš„è®¿é—®æƒé™ï¼›
2. ç¬¬äºŒç§æ˜¯ç”Ÿæˆéœ€è¦è¢«æ³¨å…¥çš„ç±»çš„æ‰©å±•æ–¹æ³•ï¼Œåœ¨æ‰©å±•æ–¹æ³•é‡Œé¢å¯¹æ¥æ”¶è€…çš„å±æ€§è¿›è¡Œèµ‹å€¼ï¼Œæ€§èƒ½æ›´å¥½ï¼Œä½†æ˜¯ç¼ºç‚¹æ˜¯æ— æ³•å¯¹privateä»¥åŠprotectedæˆå‘˜è¿›è¡Œèµ‹å€¼ã€‚&lt;/p&gt;

&lt;p&gt;ä¸€å¼€å§‹æ˜¯å¸Œæœ›å·æ‡’ï¼Œå°±é€‰æ‹©äº†ç¬¬ä¸€ç§æ–¹æ¡ˆï¼Œä½†æ˜¯é—®é¢˜æ¥äº†ï¼Œæˆ‘çŸ¥é“Javaçš„åå°„ä¼šæœ‰ä¸€äº›æ€§èƒ½ä¸Šçš„é—®é¢˜ï¼Œä½†é€Ÿåº¦è¿˜ä¸è‡³äºè®©ç”¨æˆ·æ„ŸçŸ¥æ˜æ˜¾ï¼Œä½†æ˜¯å½“æˆ‘è°ƒç”¨kotlinåå°„ç›¸å…³APIæ—¶ï¼ˆæœ€ä¸»è¦æ˜¯è·å–Propertiesç›¸å…³APIï¼‰ï¼Œå‘ç°ç¬¬ä¸€æ¬¡è°ƒç”¨èŠ±è´¹çš„åœ¨4~5s å·¦å³ï¼Œä¹‹åè°ƒç”¨é€Ÿåº¦æ˜¯æ¯«ç§’çº§çš„ï¼Œæˆ‘çŒœæµ‹æ˜¯ç¬¬ä¸€æ¬¡è°ƒç”¨åŠ è½½äº†å¤§é‡æ•°æ®ï¼Œç„¶åå°†è¿™äº›æ•°æ®ç¼“å­˜èµ·æ¥äº†ï¼Œä½†è¿™4~5sçš„è°ƒç”¨æ—¶é—´å®åœ¨æ˜¯æ¶å¿ƒï¼Œæ‰€ä»¥æœ€ç»ˆè¿˜æ˜¯å†³å®šé‡‡ç”¨æ–¹æ¡ˆ2ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥æŸ¥çœ‹&lt;code&gt;com/github/richardwrq/krouter/compiler/processor/RouteProcessor.kt&lt;/code&gt;ï¼Œç”Ÿæˆçš„ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;class com_github_richardwrq_krouter_activity_Main2Activity_KRouter_Injector : IInjector {
    override fun inject(any: Any, extras: Bundle?) {
        val bundle = getBundle(any, extras)//getBundleä¸ºè‡ªåŠ¨ç”Ÿæˆçš„é¡¶å±‚æ–¹æ³•
        (any as Main2Activity).exInject(bundle)
    }

    private fun Main2Activity.exInject(bundle: Bundle) {
        person = bundle.get(&amp;quot;person&amp;quot;) as? Person ?: KRouter.getProvider&amp;lt;Person&amp;gt;(&amp;quot;person&amp;quot;) ?: parseObject(bundle.getString(&amp;quot;person&amp;quot;), object : TypeToken&amp;lt;Person&amp;gt;() {}.getType()) ?: throw java.lang.NullPointerException(&amp;quot;Field [person] must not be null in [Main2Activity]!&amp;quot;)//parseObjectä¸ºè‡ªåŠ¨ç”Ÿæˆçš„é¡¶å±‚æ–¹æ³•
        provider = bundle.get(&amp;quot;NoImplProvider&amp;quot;) as? NoImplProvider ?: KRouter.getProvider&amp;lt;NoImplProvider&amp;gt;(&amp;quot;NoImplProvider&amp;quot;) ?: parseObject(bundle.getString(&amp;quot;NoImplProvider&amp;quot;), object : TypeToken&amp;lt;NoImplProvider&amp;gt;() {}.getType()) ?: throw java.lang.NullPointerException(&amp;quot;Field [provider] must not be null in [Main2Activity]!&amp;quot;)
        myProvider = (KRouter.getProvider&amp;lt;MyProvider&amp;gt;(&amp;quot;provider/myprovider&amp;quot;)) ?: throw java.lang.NullPointerException(&amp;quot;Field [myProvider] must not be null in [Main2Activity]!&amp;quot;)
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç”Ÿæˆçš„ç±»è·¯å¾„ä¸æ‰©å±•æ–¹æ³•æ¥æ”¶è€…çš„ç±»è·¯å¾„ç›¸åŒï¼ˆè§£å†³JavaåŒ…å†…è®¿é—®æƒé™é—®é¢˜ï¼‰ï¼Œç±»åå‘½åè§„åˆ™ä¸ºæ‰©å±•æ–¹æ³•æ¥æ”¶è€…ç±»è·¯å¾„çš„â€œ.â€œæ›¿æ¢ä¸ºâ€_â€œä½œä¸ºå‰ç¼€ï¼Œåç¼€ä¸ºâ€_KRouter_Injectorâ€œï¼Œæ¯”å¦‚è¢«è¢«æ³¨å…¥çš„ç±»æ˜¯&lt;code&gt;com.github.richardwrq.krouter.activity.Main2Activity&lt;/code&gt;ï¼Œé‚£ä¹ˆè‡ªåŠ¨ç”Ÿæˆçš„ç±»ä¸º&lt;code&gt;com.github.richardwrq.krouter.activity.com_github_richardwrq_krouter_activity_Main2Activity_KRouter_Injector&lt;/code&gt;
#####KRouter-api
è¯¥æ¨¡å—å…¶å®å°±æ˜¯æä¾›APIç»™ç”¨æˆ·è°ƒç”¨çš„SDK
ä¸Šé¢æåˆ°SDKéœ€è¦æ‰§è¡Œ&lt;strong&gt;KRouter-compiler&lt;/strong&gt;æ¨¡å—ç±»çš„ä»£ç æ‰èƒ½çœŸæ­£å®Œæˆè·¯ç”±è¡¨åˆå§‹åŒ–çš„å·¥ä½œï¼Œç”±äºæœ€ç»ˆç¼–è¯‘å™¨ä¼šå°†æ‰€æœ‰Moduleæ‰“åŒ…æˆä¸€ä¸ªapkï¼Œæ‰€ä»¥åœ¨APPè¿è¡Œæ—¶æ˜¯ä¸å­˜åœ¨Moduleçš„æ¦‚å¿µçš„ï¼Œä½†æ˜¯æŒ‰ç…§è§£å†³æ–¹æ¡ˆ2å„Moduleç”Ÿæˆçš„ç±»ä¼šä»¥Moduleåç§°ä½œä¸ºåç¼€ï¼Œå› æ­¤å¿…é¡»æƒ³åŠæ³•è®©SDKè·å–åˆ°é¡¹ç›®ä¸­æ‰€æœ‰Moduleçš„åç§°ï¼Œè€ƒè™‘å†ä¸‰ï¼Œæˆ‘é‡‡å–çš„è§£å†³æ–¹æ¡ˆæ˜¯ä»&lt;code&gt;assets&lt;/code&gt;ç›®å½•å…¥æ‰‹ï¼Œåœ¨é¡¹ç›®æ„å»ºæ—¶æœŸåˆ›å»ºä¸€ä¸ªtaskï¼Œè¿™ä¸ªtaskä¼šåœ¨Moduleçš„&lt;code&gt;src/main/assets&lt;/code&gt;ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªâ€œKRouter&lt;em&gt;ModuleNameâ€çš„æ–‡ä»¶ï¼Œåœ¨SDKåˆå§‹åŒ–çš„æ—¶å€™åªéœ€è¦åˆ—å‡º&lt;code&gt;assets&lt;/code&gt;ç›®å½•ä¸‹æ‰€æœ‰&amp;rdquo;KRouter&lt;/em&gt;&amp;ldquo;å¼€å¤´çš„æ–‡ä»¶å¹¶æˆªå–ä¸‹åˆ’çº¿â€œ_â€åçš„å†…å®¹ï¼Œå³å¯å¾—åˆ°ä¸€ä¸ªåŒ…å«æ‰€æœ‰Moduleåç§°çš„åˆ—è¡¨ã€‚
ä¸‹é¢ç»™å‡ºSDKçš„ç±»å›¾ï¼ŒåŒå­¦ä»¬å¯ä»¥å¯¹ç…§æºç å‚è€ƒ
&lt;img src=&#34;https://upload-images.jianshu.io/upload_images/745509-9e7ee15fad22c478.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&#34; alt=&#34;KRouter-apiç±»å›¾.png&#34; /&gt;
#####KRouter-gradle-plugin
å®Œæˆä¸Šè¿°ä¸¤ä¸ªæ¨¡å—åå…¶å®&lt;code&gt;KRouter&lt;/code&gt;æ¡†æ¶å·²ç»å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ï¼Œå¼•ç”¨æ–¹å¼å¦‚ä¸‹ï¼š
åœ¨å„Moduleçš„&lt;code&gt;build.gradle&lt;/code&gt;åŠ å…¥ä¸‹é¢çš„ä»£ç &lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-groovy&#34;&gt;kapt {
    arguments {
        arg(&amp;quot;moduleName&amp;quot;, project.getName())
    }
}
dependencies {
    implementation &#39;com.github.richardwrq:krouter-api:x.y.zâ€™
    kapt &#39;com.github.richardwrq:krouter-compiler:x.y.z&#39;
}
afterEvaluate {
    //åœ¨assetsç›®å½•åˆ›å»ºæ–‡ä»¶çš„task
    ...
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å½“é¡¹ç›®ä¸­Moduleè¾ƒå¤šæ—¶ï¼Œæ‰‹åŠ¨åœ¨æ¯ä¸€ä¸ªModuleåŠ å…¥è¿™äº›é…ç½®æœªå…æœ‰äº›è ¢ã€‚ã€‚æ‰€ä»¥æˆ‘å†™äº†ä¸€ä¸ªgradleæ’ä»¶ç”¨æ¥è‡ªåŠ¨å®Œæˆè¿™äº›é…ç½®å·¥ä½œï¼Œå…·ä½“å®ç°å‚è€ƒæºç ï¼Œé€»è¾‘éå¸¸ç®€å•ï¼Œæœ€åä½¿ç”¨å¼•ç”¨æ–¹å¼å˜æˆä¸‹é¢è¿™æ ·ï¼š
åœ¨é¡¹ç›®æ ¹ç›®å½•&lt;code&gt;build.gradle&lt;/code&gt;æ–‡ä»¶åŠ å…¥å¦‚ä¸‹é…ç½®&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-groovy&#34;&gt;buildscript {

    dependencies {
        classpath &amp;quot;org.jetbrains.kotlin:kotlin-gradle-plugin:x.y.z&amp;quot;
        classpath &amp;quot;com.github.richardwrq:krouter-gradle-plugin:x.y.z&amp;quot;
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¶ååœ¨å„Moduleçš„&lt;code&gt;build.gradle&lt;/code&gt;æ–‡ä»¶åŠ å…¥å¦‚ä¸‹é…ç½®&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-groovy&#34;&gt;apply plugin: &#39;kotlin-android&#39;
apply plugin: &#39;kotlin-kapt&#39;
apply plugin: &amp;quot;com.github.richardwrq.krouter&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åˆ°è¿™é‡Œ&lt;code&gt;KRouter&lt;/code&gt;è·¯ç”±æ¡†æ¶å°±ç²—ç•¥çš„ä»‹ç»äº†ä¸€éï¼Œç”±äº&lt;code&gt;kapt&lt;/code&gt;ä»åœ¨ä¸æ–­å®Œå–„ï¼Œæ‰€ä»¥ä½¿ç”¨è¿‡ç¨‹ä¸­éš¾å…ç¢°åˆ°ä¸€äº›å‘æˆ–è€…æœ¬èº«APIåŠŸèƒ½ä¸å¤Ÿå®Œå–„ï¼Œä¸‹é¢å°±åˆ—ä¸¾ä¸€äº›é‡åˆ°çš„é—®é¢˜ä»¥åŠè§£å†³æ–¹æ³•ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.jianshu.com/p/f1ca4314f804&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;æ³¨è§£å¤„ç†å™¨Annotation Processorä¸­åˆ¤æ–­Javaæˆ–kotlinç±»&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.jianshu.com/p/f41d21850cb4&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;ä½¿ç”¨kotlinpoetç”Ÿæˆkotlinä»£ç æ•°æ®ç±»å‹ä¸æ­£ç¡®çš„é—®é¢˜&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h5 id=&#34;todolist&#34;&gt;ToDoList&lt;/h5&gt;

&lt;ul&gt;
&lt;li&gt;é€šè¿‡gradleæ’ä»¶ä¿®æ”¹&lt;code&gt;AndroidManifest.xml&lt;/code&gt;æ–‡ä»¶ï¼Œè‡ªåŠ¨æ³¨å†Œè·¯ç”±ç»„ä»¶ï¼ˆActivityã€Serviceï¼‰&lt;/li&gt;
&lt;li&gt;ç›®å‰å°šä¸æ”¯æŒåŠ¨æ€åŠ è½½çš„æ’ä»¶çš„è·¯ç”±æ³¨å†Œï¼Œä½†æœ‰è§£å†³æ–¹æ¡ˆï¼Œhook classloaderè£…è½½æ–¹æ³•ï¼Œåœ¨åŠ è½½dexæ–‡ä»¶æ—¶æ‰«æ&lt;code&gt;KRouter&lt;/code&gt;çš„è·¯ç”±ç»„ä»¶&lt;/li&gt;
&lt;li&gt;æ”¯æŒå¤šåº”ç”¨å¤šè¿›ç¨‹ç¯å¢ƒä¸‹çš„é¡µé¢è·¯&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title></title>
      <link>https://richardwrq.github.io/404/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://richardwrq.github.io/404/</guid>
      <description>

&lt;h1 id=&#34;error-404-page-not-found&#34;&gt;Error 404: Page Not Found&lt;/h1&gt;

&lt;hr /&gt;

&lt;h4 id=&#34;it-seems-that-the-page-that-you-re-trying-to-access-doesn-t-exist&#34;&gt;It seems that the page that you&amp;rsquo;re trying to access doesn&amp;rsquo;t exist. ğŸ˜Ÿ&lt;/h4&gt;

&lt;h4 id=&#34;if-you-re-sure-that-it-exists-chances-are-it-might-have-been-moved-to-a-new-link-you-may-search-for-it-on-the-home-page&#34;&gt;If you&amp;rsquo;re sure that it exists, chances are it might have been moved to a new link! You may search for it on the home page.&lt;/h4&gt;
</description>
    </item>
    
    <item>
      <title></title>
      <link>https://richardwrq.github.io/about/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://richardwrq.github.io/about/</guid>
      <description>&lt;p&gt;ä¸€ä¸ªç¨‹åºå‘˜&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>